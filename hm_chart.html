<html lang="zh-CN"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>雨水控制量数据可视化</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
  <!-- 添加 datalabels 插件 -->
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Tailwind 配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#3b82f6',
            secondary: '#64748b',
            accent: '#f97316',
            success: '#10b981',
            info: '#06b6d4',
            warning: '#f59e0b',
            danger: '#ef4444',
          },
          fontFamily: {
            inter: ['Inter', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .card-shadow {
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }
      .hover-scale {
        transition: transform 0.3s ease;
      }
      .hover-scale:hover {
        transform: scale(1.03);
      }
      .chart-container {
        position: relative;
        height: 400px;
        width: 100%;
      }
    }
  </style>
</head>
<body class="font-inter bg-gray-50 text-gray-800 min-h-screen">
  <!-- 导航栏 -->
  <nav class="bg-white shadow-md sticky top-0 z-50 transition-all duration-300">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16">
        <div class="flex items-center">
          <i class="fa fa-tint text-primary text-2xl mr-3"></i>
          <span class="font-bold text-xl text-gray-800">雨水控制量数据可视化</span>
        </div>
        <!-- 删除了导出数据按钮 -->
      </div>
    </div>
  </nav>

  <!-- 主要内容 -->
  <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
    <!-- 页面标题 -->
    <div class="mb-8 text-center">
      <h1 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-gray-800 mb-2">雨水控制量分析</h1>
      <p class="text-gray-600 text-lg max-w-3xl mx-auto">
        本可视化展示了不同类型雨水控制措施的水量分布情况，帮助理解各部分在整体雨水管理中的贡献。
      </p>
    </div>
    
    <!-- 数据概览卡片 -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <!-- 下渗量卡片 -->
      <div class="bg-white rounded-xl p-6 card-shadow hover-scale border-l-4 border-blue-500">
        <div class="flex justify-between items-start">
          <div>
            <h3 class="text-gray-500 font-medium mb-1">下渗量</h3>
            <p class="text-2xl font-bold text-gray-800">210.57 m³</p>
            <p class="text-blue-500 text-sm mt-1">
              <i class="fa fa-arrow-up mr-1"></i>占比 43.40%
            </p>
          </div>
          <div class="bg-blue-100 p-3 rounded-lg">
            <i class="fa fa-arrow-down text-blue-500 text-xl"></i>
          </div>
        </div>
      </div>
      
      <!-- 水面控制量卡片 -->
      <div class="bg-white rounded-xl p-6 card-shadow hover-scale border-l-4 border-green-500">
        <div class="flex justify-between items-start">
          <div>
            <h3 class="text-gray-500 font-medium mb-1">水面控制量</h3>
            <p class="text-2xl font-bold text-gray-800">25 m³</p>
            <p class="text-green-500 text-sm mt-1">
              <i class="fa fa-arrow-up mr-1"></i>占比 5.15%
            </p>
          </div>
          <div class="bg-green-100 p-3 rounded-lg">
            <i class="fa fa-tint text-green-500 text-xl"></i>
          </div>
        </div>
      </div>
      
      <!-- 下凹绿地控制量卡片 -->
      <div class="bg-white rounded-xl p-6 card-shadow hover-scale border-l-4 border-purple-500">
        <div class="flex justify-between items-start">
          <div>
            <h3 class="text-gray-500 font-medium mb-1">下凹绿地控制量</h3>
            <p class="text-2xl font-bold text-gray-800">200 m³</p>
            <p class="text-purple-500 text-sm mt-1">
              <i class="fa fa-arrow-up mr-1"></i>占比 41.22%
            </p>
          </div>
          <div class="bg-purple-100 p-3 rounded-lg">
            <i class="fa fa-leaf text-purple-500 text-xl"></i>
          </div>
        </div>
      </div>
      
      <!-- 蓄水池控制量卡片 -->
      <div class="bg-white rounded-xl p-6 card-shadow hover-scale border-l-4 border-yellow-500">
        <div class="flex justify-between items-start">
          <div>
            <h3 class="text-gray-500 font-medium mb-1">蓄水池控制量</h3>
            <p class="text-2xl font-bold text-gray-800">49.6 m³</p>
            <p class="text-yellow-500 text-sm mt-1">
              <i class="fa fa-arrow-up mr-1"></i>占比 10.22%
            </p>
          </div>
          <div class="bg-yellow-100 p-3 rounded-lg">
            <i class="fa fa-tank-water text-yellow-500 text-xl"></i>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 全年控制总量卡片 -->
    <div class="bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl p-6 card-shadow mb-8">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div>
          <h3 class="text-white font-medium mb-1">全年控制总量</h3>
          <p class="text-3xl font-bold text-white">485.17 m³</p>
        </div>
      </div>
    </div>
    
    <!-- 图表区域 -->
    <div class="bg-white rounded-xl p-6 card-shadow mb-8">
      <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
        <h2 class="text-xl font-bold text-gray-800 mb-2 md:mb-0">雨水控制量分布</h2>
        <div class="flex space-x-2">
          <button class="bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-lg transition-all duration-300 active">
            饼图
          </button>
        </div>
      </div>
      
      <div class="chart-container">
        <canvas id="rainwaterChart"></canvas>
      </div>
    </div>
    
    <!-- 数据分析 -->
    <div class="bg-white rounded-xl p-6 card-shadow mb-8">
      <h2 class="text-xl font-bold text-gray-800 mb-4">雨水控制量分析</h2>
      <div class="prose max-w-none">
        <p>根据数据显示，在全年485.17 m³的雨水控制总量中，下渗量和下凹绿地控制量占据了主要部分，分别为43.40%和41.22%。这表明地表渗透和绿地吸收是雨水管理的主要方式。</p>
        <p>水面控制量占比最小，仅为5.15%，可能反映出该区域人工水域或自然水体在雨水管理中的作用相对有限。蓄水池控制量占10.22%，显示了蓄水设施在整体雨水调控中的贡献。</p>
        <p>建议进一步优化水面和蓄水池的雨水收集能力，以提高整体雨水控制效率，减少城市内涝风险并促进水资源的有效利用。</p>
      </div>
    </div>
  </main>
  
  <!-- 删除了页脚部分 -->

  <!-- 图表脚本 -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 雨水控制量数据
      const rainwaterData = {
        labels: ['下渗量', '水面控制量', '下凹绿地控制量', '蓄水池控制量'],
        datasets: [{
          data: [210.57, 25, 200, 49.6],
          backgroundColor: [
            '#3b82f6', // 蓝色 - 下渗量
            '#10b981', // 绿色 - 水面控制量
            '#8b5cf6', // 紫色 - 下凹绿地控制量
            '#f59e0b', // 黄色 - 蓄水池控制量
          ],
          borderColor: [
            '#ffffff',
            '#ffffff',
            '#ffffff',
            '#ffffff',
          ],
          borderWidth: 2,
          hoverOffset: 15
        }]
      };
      
      // 图表配置
      const config = {
        type: 'pie',
        data: rainwaterData,
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'right',
              labels: {
                font: {
                  family: 'Inter, sans-serif',
                  size: 14
                },
                padding: 20,
                boxWidth: 15,
                boxHeight: 15
              }
            },
            tooltip: {
              backgroundColor: 'rgba(0, 0, 0, 0.7)',
              titleFont: {
                family: 'Inter, sans-serif',
                size: 16,
                weight: 'bold'
              },
              bodyFont: {
                family: 'Inter, sans-serif',
                size: 14
              },
              padding: 15,
              cornerRadius: 10,
              displayColors: true,
              callbacks: {
                label: function(context) {
                  const label = context.label || '';
                  const value = context.raw || 0;
                  const total = context.dataset.data.reduce((acc, val) => acc + val, 0);
                  const percentage = Math.round((value / total) * 10000) / 100;
                  return `${label}: ${value} m³ (${percentage}%)`;
                }
              }
            },
            title: {
              display: false
            },
            // 配置 datalabels 插件
            datalabels: {
              color: 'white',
              font: {
                family: 'Inter, sans-serif',
                size: 14
              },
              formatter: (value, context) => {
                const total = context.dataset.data.reduce((acc, val) => acc + val, 0);
                const percentage = Math.round((value / total) * 10000) / 100;
                return `${value} m³\n${percentage}%`;
              },
              padding: 5,
              textAlign: 'center'
            }
          },
          animation: {
            animateRotate: true,
            animateScale: true,
            duration: 2000,
            easing: 'easeOutQuart'
          }
        },
        plugins: [ChartDataLabels] // 注册 datalabels 插件
      };
      
      // 创建图表
      const ctx = document.getElementById('rainwaterChart').getContext('2d');
      const myChart = new Chart(ctx, config);
      
      // 导航栏滚动效果
      window.addEventListener('scroll', function() {
        const nav = document.querySelector('nav');
        if (window.scrollY > 10) {
          nav.classList.add('bg-white/95', 'backdrop-blur-sm');
          nav.classList.remove('bg-white');
        } else {
          nav.classList.add('bg-white');
          nav.classList.remove('bg-white/95', 'backdrop-blur-sm');
        }
      });
    });
  </script>

</body></html>
